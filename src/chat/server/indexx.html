<!DOCTYPE html>
<html lang="es" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.00"/>
    <title>Chat grupal</title>
    <style>
      #messages{
        width: 95%;
        max-width: auto;
        height: auto;
        overflow-y: scroll;
        border: 1px solid #eee;
        box-shadow: 0px 0px 20px #ccc inset;
      }

      .message{
        margin: 20px;
        padding: 5px;
        border-radius: 5px;
        border: 1px solid #ccc;
        background: white;
      }
    </style>
  </head>
  <body>
    <h1>Chat grupal
      <button id='clear'>Clear</button>
    </h1>
    <div id="status">
    </div>
    <div id="chat">
      <input id="username" type="text" placeholder="Ingrese nombre"/>
      <div id="messages">

      </div>
      <textarea id="textarea" placeholder="Mensaje..."></textarea>
      <input type="submit" value="Enviar"/>
    </div>
  </body>
  <script type="text/javascript" src="/socket.io/socket.io.js"></script>
  <script src="server.js"></script>

  <script>
    (function(){
      var element = function(id){
        return document.getElementById(id);
      }

      //get
      var status = element('status');
      var messages = element('messages');
      var textarea = element('textarea');
      var username = element('username');
      var clear = element('clear');

      //set default sendStatus
      var statusDefault = status.textContent;

      var setStatus = function(s){
        //set statusDefaul
        status.textContent = s;

        if(s !== statusDefault){
          var delay = setTimeout(function(){
            setStatus(statusDefault);
          }, 4000);
        }
      }

      //conect socket
      var socket = io.connect('http://127.0.0.1:4000');

      //check
      if(socket !== undefined){
        console.log('Connected to socket...');

        socket.on('output', function(data){
          console.log(data);
        });
      }
    })
  </script>
</html>
